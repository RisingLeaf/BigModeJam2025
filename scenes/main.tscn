[gd_scene load_steps=33 format=4 uid="uid://dbc3mvxb8ur5t"]

[ext_resource type="Texture2D" uid="uid://bp550ekdeapc2" path="res://images/hookpoint button.png" id="2_3uf8v"]
[ext_resource type="Texture2D" uid="uid://dnpwiorisudln" path="res://images/Background_A.JPG" id="2_xgun8"]
[ext_resource type="Texture2D" uid="uid://clr1dxquofraq" path="res://images/start_selected.png" id="3_k68th"]
[ext_resource type="Script" path="res://scripts/start.gd" id="3_mf4xg"]
[ext_resource type="Texture2D" uid="uid://bc3xqid7ah70n" path="res://images/hookpoint button selected.png" id="3_yge4o"]
[ext_resource type="Script" path="res://scripts/PowerDisplay.gd" id="4_52yjf"]
[ext_resource type="Script" path="res://scripts/hook_point_placer.gd" id="4_yhxkl"]
[ext_resource type="Texture2D" uid="uid://ulxny5be26h1" path="res://images/start.png" id="6_anmu0"]
[ext_resource type="Script" path="res://scripts/HookPointDrawer.gd" id="8_i0oen"]
[ext_resource type="Script" path="res://scripts/map_generator.gd" id="8_tf8mm"]
[ext_resource type="Texture2D" uid="uid://cg3r4e2pkrvv1" path="res://images/unselected hookpoint.png" id="9_7f5pm"]
[ext_resource type="PackedScene" uid="uid://enbdi0pkwy0f" path="res://scenes/camera_2d.tscn" id="11_b1x8d"]
[ext_resource type="TileSet" uid="uid://breu25mcou247" path="res://scenes/main.tres" id="14_bkjpn"]
[ext_resource type="Shader" path="res://scripts/pp.gdshader" id="14_kgou4"]
[ext_resource type="Script" path="res://scripts/state_control.gd" id="15_7ss4k"]
[ext_resource type="Texture2D" uid="uid://cbrn22f8duy3d" path="res://images/Selected hookpoint.png" id="16_mmmwj"]
[ext_resource type="PackedScene" uid="uid://lmm7ey4g3hp" path="res://scenes/player.tscn" id="17_1a48t"]
[ext_resource type="Script" path="res://scripts/animated_sprite_2d.gd" id="17_imnnu"]
[ext_resource type="Script" path="res://scripts/Rope.gd" id="18_llqtx"]

[sub_resource type="LabelSettings" id="LabelSettings_300du"]
font_size = 9

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_bbvn0"]

[sub_resource type="AtlasTexture" id="AtlasTexture_2jvj0"]
atlas = ExtResource("16_mmmwj")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_a8w0k"]
atlas = ExtResource("16_mmmwj")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_a7cwl"]
atlas = ExtResource("16_mmmwj")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_0qrga"]
atlas = ExtResource("16_mmmwj")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_qmxb8"]
atlas = ExtResource("16_mmmwj")
region = Rect2(128, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7o4nu"]
atlas = ExtResource("16_mmmwj")
region = Rect2(160, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_qc504"]
atlas = ExtResource("16_mmmwj")
region = Rect2(192, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jpydq"]
atlas = ExtResource("16_mmmwj")
region = Rect2(224, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_abr54"]
atlas = ExtResource("16_mmmwj")
region = Rect2(256, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_uapsx"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2jvj0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a8w0k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a7cwl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0qrga")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qmxb8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7o4nu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qc504")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jpydq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_abr54")
}],
"loop": true,
"name": &"Hook Point",
"speed": 10.0
}, {
"frames": [],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ib0ci"]
shader = ExtResource("14_kgou4")
shader_parameter/WATER_COL = Color(0.176471, 0.635294, 0.85098, 1)
shader_parameter/WATER2_COL = Color(0.0588235, 0.529412, 0.776471, 1)
shader_parameter/FOAM_COL = Color(0.87451, 0.988235, 1, 1)
shader_parameter/distortion_speed = 2.0
shader_parameter/tile = Vector2(5, 5)
shader_parameter/offset = Vector2(0, 0)

[node name="Node2D" type="Node2D"]
physics_interpolation_mode = 1
texture_filter = 1

[node name="StateControl" type="Node2D" parent="." node_paths=PackedStringArray("InGameOverlay", "PrestartOverlay", "PlayerInst", "ActionNode", "Camera")]
script = ExtResource("15_7ss4k")
InGameOverlay = NodePath("../InGame")
PrestartOverlay = NodePath("../Paused")
PlayerInst = NodePath("../Action Stuff/Player")
ActionNode = NodePath("../Action Stuff")
Camera = NodePath("../Camera2D")

[node name="Paused" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="Paused"]
custom_minimum_size = Vector2(0, 70)
anchors_preset = -1
anchor_top = 0.917
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 9.75995
grow_horizontal = 2
grow_vertical = 0
color = Color(0.179798, 0.091441, 0.120288, 1)

[node name="Start" type="TextureButton" parent="Paused/ColorRect" node_paths=PackedStringArray("StateM")]
texture_filter = 1
custom_minimum_size = Vector2(300, 0)
layout_mode = 1
anchors_preset = 13
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -64.0
offset_right = 64.0
grow_horizontal = 2
grow_vertical = 2
texture_normal = ExtResource("6_anmu0")
texture_pressed = ExtResource("3_k68th")
texture_hover = ExtResource("3_k68th")
stretch_mode = 6
script = ExtResource("3_mf4xg")
StateM = NodePath("../../../StateControl")

[node name="HookPointPlacer" type="TextureButton" parent="Paused/ColorRect" node_paths=PackedStringArray("PlayerInst", "TileMapInst", "Camera", "Counter")]
texture_filter = 1
layout_mode = 1
anchors_preset = -1
anchor_right = 0.047
anchor_bottom = 1.0
offset_left = 5.0
offset_right = -1.16
grow_vertical = 2
texture_normal = ExtResource("2_3uf8v")
texture_pressed = ExtResource("3_yge4o")
texture_hover = ExtResource("3_yge4o")
stretch_mode = 5
script = ExtResource("4_yhxkl")
PlayerInst = NodePath("../../../Action Stuff/Player")
TileMapInst = NodePath("../../../MapGenerator")
Camera = NodePath("../../../Camera2D")
PointTex = ExtResource("9_7f5pm")
Counter = NodePath("Counter")
HookPoints = 6

[node name="Counter" type="Label" parent="Paused/ColorRect/HookPointPlacer"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -15.0
offset_top = -22.0
offset_bottom = -8.0
grow_horizontal = 0
grow_vertical = 0
text = "1"
label_settings = SubResource("LabelSettings_300du")
horizontal_alignment = 1
vertical_alignment = 1

[node name="InGame" type="CanvasLayer" parent="."]

[node name="Power" type="Label" parent="InGame" node_paths=PackedStringArray("PlayerInst")]
offset_right = 122.0
offset_bottom = 55.0
theme_override_font_sizes/font_size = 40
text = "Power"
script = ExtResource("4_52yjf")
PlayerInst = NodePath("../../Action Stuff/Player")

[node name="Background" type="CanvasLayer" parent="."]
layer = -1

[node name="Control" type="Control" parent="Background"]
z_as_relative = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="TextureRect" type="TextureRect" parent="Background/Control"]
z_as_relative = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_xgun8")
expand_mode = 2
stretch_mode = 6

[node name="Camera2D" parent="." node_paths=PackedStringArray("PlayerInst") instance=ExtResource("11_b1x8d")]
PlayerInst = NodePath("../Action Stuff/Player")

[node name="HookPointDrawer" type="Node2D" parent="." node_paths=PackedStringArray("PlayerInst")]
texture_filter = 1
scale = Vector2(4, 4)
script = ExtResource("8_i0oen")
PlayerInst = NodePath("../Action Stuff/Player")
PointTex = ExtResource("9_7f5pm")

[node name="MapGenerator" type="Node2D" parent="." node_paths=PackedStringArray("TileMapToUse", "PlayerInst", "North", "East", "West", "South")]
script = ExtResource("8_tf8mm")
TileMapToUse = NodePath("TileMapLayer")
PlayerInst = NodePath("../Action Stuff/Player")
LargeGridRes = 16
LargeGridSize = 6
North = NodePath("../Action Stuff/WorldBorders/North")
East = NodePath("../Action Stuff/WorldBorders/East")
West = NodePath("../Action Stuff/WorldBorders/West")
South = NodePath("../Action Stuff/WorldBorders/South")
BreakingBarrierPath = "res://scenes/conditionally_breaking.tscn"
SpikePath = "res://scenes/spike.tscn"
VolcanoPath = "res://scenes/bubble_emitter.tscn"

[node name="TileMapLayer" type="TileMapLayer" parent="MapGenerator"]
scale = Vector2(4, 4)
tile_map_data = PackedByteArray("AAD7////AQAGAAAAAAD8////AQACAAAAAAD8//7/AQAKAAAAAAD7//7/AQAMAAAAAAD7/wEAAQAAAAAAAAD8/wEAAQAFAAAAAAD9/wEAAQABAAAAAAD9/wIAAQAHAAAAAAD8/wIAAQAIAAAAAAD7/wIAAQAEAAAAAAD7/wMAAQADAAAAAAD8/wMAAQAGAAAAAAD9/wMAAQACAAAAAAD3//7/AQAEAAAAAAD4//7/AQAIAAAAAAD3//3/AQAAAAAAAAD4//3/AQAFAAAAAAD5/wAAAQAHAAAAAAD4/wAAAQAIAAAAAAD3/wAAAQAEAAAAAAD3////AQAEAAAAAAD4////AQAIAAAAAAD5////AQAKAAAAAAD5//7/AQAJAAAAAAD5//3/AQABAAAAAAD4/wIAAQAIAAAAAAD4/wMAAQAIAAAAAAD4/wQAAQAGAAAAAAD5/wQAAQACAAAAAAD5/wMAAQAHAAAAAAD5/wIAAQAHAAAAAAD3/wIAAQAEAAAAAAD3/wMAAQAEAAAAAAD3/wQAAQADAAAAAAD0/wEAAQAIAAAAAAD0/wIAAQAIAAAAAAD0/wMAAQAGAAAAAAD1/wMAAQACAAAAAAD1/wIAAQAHAAAAAAD1/wEAAQAHAAAAAAD1/wAAAQABAAAAAAD0/wAAAQAFAAAAAADz/wEAAQAIAAAAAADy/wEAAQAEAAAAAADy/wIAAQAEAAAAAADz/wIAAQAIAAAAAADz/wMAAQAGAAAAAADy/wMAAQADAAAAAADy/wAAAQAAAAAAAADz/wAAAQAFAAAAAAD///3/AQAMAAAAAAAAAP3/AQAKAAAAAAABAP3/AQAGAAAAAAACAP3/AQAGAAAAAAADAP3/AQAGAAAAAAAEAP3/AQACAAAAAAAEAPz/AQABAAAAAAADAPz/AQAFAAAAAAACAPz/AQAFAAAAAAABAPz/AQAFAAAAAAAAAPz/AQAFAAAAAAD///z/AQAAAAAAAAAFAPL/AQADAAAAAAAGAPL/AQALAAAAAAAGAPP/AQADAAAAAAAHAPT/AQADAAAAAAAIAPX/AQAEAAAAAAAJAPb/AQAIAAAAAAAKAPb/AQAIAAAAAAAMAPb/AQAHAAAAAAALAPb/AQAIAAAAAAANAPX/AQACAAAAAAAOAPT/AQACAAAAAAAPAPP/AQACAAAAAAAQAPL/AQACAAAAAAARAPH/AQACAAAAAAARAPD/AQAHAAAAAAARAO//AQAHAAAAAAARAO7/AQABAAAAAAAQAO3/AQABAAAAAAAPAOz/AQABAAAAAAANAOv/AQABAAAAAAAOAOz/AQAFAAAAAAALAOr/AQABAAAAAAAMAOv/AQAFAAAAAAAKAOn/AQABAAAAAAAJAOn/AQAFAAAAAAAIAOn/AQAAAAAAAAAHAOr/AQAAAAAAAAAHAOv/AQAEAAAAAAAGAO3/AQAAAAAAAAAHAOz/AQAEAAAAAAAGAO7/AQAEAAAAAAAGAO//AQAEAAAAAAAGAPD/AQAMAAAAAAAFAPD/AQAAAAAAAAAFAPH/AQAEAAAAAAAGAPH/AQAIAAAAAAAHAPD/AQAIAAAAAAAHAPH/AQAIAAAAAAAHAO//AQAIAAAAAAAHAO7/AQAIAAAAAAAIAPD/AQAIAAAAAAAIAO//AQAIAAAAAAAHAO3/AQAMAAAAAAAIAO3/AQAIAAAAAAAIAO7/AQAIAAAAAAAJAPD/AQAIAAAAAAAJAPH/AQAIAAAAAAAQAPH/AQAKAAAAAAAQAPD/AQAIAAAAAAAQAO//AQAIAAAAAAAQAO7/AQAJAAAAAAAPAPL/AQAKAAAAAAAPAPH/AQAIAAAAAAAPAPD/AQAIAAAAAAAPAO//AQAIAAAAAAAPAO7/AQAIAAAAAAAOAPP/AQAKAAAAAAAOAPL/AQAIAAAAAAAOAPH/AQAIAAAAAAAOAPD/AQAIAAAAAAAOAO//AQAIAAAAAAAOAO7/AQAIAAAAAAANAPT/AQAKAAAAAAANAPP/AQAIAAAAAAANAPL/AQAIAAAAAAANAPH/AQAIAAAAAAANAPD/AQAIAAAAAAANAO//AQAIAAAAAAANAO7/AQAIAAAAAAANAO3/AQAIAAAAAAANAOz/AQAJAAAAAAAMAPX/AQAKAAAAAAAMAPT/AQAIAAAAAAAMAPP/AQAIAAAAAAAMAPL/AQAIAAAAAAAMAPH/AQAIAAAAAAAMAPD/AQAIAAAAAAAMAO//AQAIAAAAAAAMAO7/AQAIAAAAAAAMAO3/AQAIAAAAAAAMAOz/AQAIAAAAAAALAPX/AQAIAAAAAAALAPT/AQAIAAAAAAALAPP/AQAIAAAAAAALAPL/AQAIAAAAAAALAPH/AQAIAAAAAAALAPD/AQAIAAAAAAALAO//AQAIAAAAAAALAO7/AQAIAAAAAAALAO3/AQAIAAAAAAALAOz/AQAIAAAAAAALAOv/AQAJAAAAAAAKAPX/AQAIAAAAAAAKAPT/AQAIAAAAAAAKAPP/AQAIAAAAAAAKAPL/AQAIAAAAAAAKAPH/AQAIAAAAAAAKAPD/AQAIAAAAAAAKAO//AQAIAAAAAAAKAO7/AQAIAAAAAAAKAO3/AQAIAAAAAAAKAOz/AQAIAAAAAAAKAOv/AQAIAAAAAAAKAOr/AQAJAAAAAAAJAPX/AQAIAAAAAAAJAPT/AQAIAAAAAAAJAPP/AQAIAAAAAAAJAPL/AQAIAAAAAAAJAO//AQAIAAAAAAAJAO7/AQAIAAAAAAAJAO3/AQAIAAAAAAAJAOz/AQAIAAAAAAAJAOv/AQAIAAAAAAAJAOr/AQAIAAAAAAAIAPT/AQALAAAAAAAIAPP/AQAIAAAAAAAIAPL/AQAIAAAAAAAIAPH/AQAIAAAAAAAIAOz/AQAIAAAAAAAIAOv/AQAIAAAAAAAIAOr/AQAMAAAAAAAHAPP/AQALAAAAAAAHAPL/AQAIAAAAAAD5/wEAAQAHAAAAAAD4/wEAAQAIAAAAAAD3/wEAAQAEAAAAAAALAPf/AQALAAAAAAAMAPj/AQACAAAAAAAMAPf/AQAHAAAAAAAJAPf/AQAKAAAAAAAJAPj/AQACAAAAAAAIAPj/AQADAAAAAAAIAPf/AQAEAAAAAAAIAPb/AQAEAAAAAAAKAPf/AQAGAAAAAAALAPj/AQADAAAAAAAPAO3/AQAJAAAAAAAOAO3/AQAIAAAAAAD6////AQAGAAAAAAD6//7/AQAFAAAAAAD9//7/AQAGAAAAAAD+//7/AQAGAAAAAAD///7/AQAGAAAAAAAAAP7/AQACAAAAAAD+//3/AQAFAAAAAAD9//3/AQAFAAAAAAD8//3/AQAFAAAAAAD7//3/AQAAAAAAAAA=")
tile_set = ExtResource("14_bkjpn")

[node name="Action Stuff" type="Node2D" parent="."]

[node name="WorldBorders" type="Node2D" parent="Action Stuff"]

[node name="North" type="CollisionShape2D" parent="Action Stuff/WorldBorders"]
rotation = 3.14159
shape = SubResource("WorldBoundaryShape2D_bbvn0")

[node name="East" type="CollisionShape2D" parent="Action Stuff/WorldBorders"]
rotation = 4.71239
shape = SubResource("WorldBoundaryShape2D_bbvn0")

[node name="West" type="CollisionShape2D" parent="Action Stuff/WorldBorders"]
rotation = 1.5708
shape = SubResource("WorldBoundaryShape2D_bbvn0")

[node name="South" type="CollisionShape2D" parent="Action Stuff/WorldBorders"]
shape = SubResource("WorldBoundaryShape2D_bbvn0")

[node name="Player" parent="Action Stuff" node_paths=PackedStringArray("RopeInst", "HookPoint") instance=ExtResource("17_1a48t")]
RopeInst = NodePath("../HookStuff/Rope")
HookPoint = NodePath("../HookStuff/PinJoint2D")

[node name="HookStuff" type="Node2D" parent="Action Stuff"]

[node name="PinJoint2D" type="PinJoint2D" parent="Action Stuff/HookStuff"]
position = Vector2(-5606, 2999)
node_a = NodePath("StaticBody2D")
node_b = NodePath("..")
softness = 2.0

[node name="StaticBody2D" type="StaticBody2D" parent="Action Stuff/HookStuff/PinJoint2D"]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Action Stuff/HookStuff/PinJoint2D"]
texture_filter = 1
scale = Vector2(4, 4)
sprite_frames = SubResource("SpriteFrames_uapsx")
animation = &"Hook Point"
script = ExtResource("17_imnnu")

[node name="Rope" type="Line2D" parent="Action Stuff/HookStuff" node_paths=PackedStringArray("NodeA", "NodeB")]
z_index = -1
default_color = Color(0.713726, 0.835294, 0.235294, 1)
script = ExtResource("18_llqtx")
NodeA = NodePath("../PinJoint2D")
NodeB = NodePath("../../Player")
Width = 5
Stretchyness = 500.0

[node name="PP" type="CanvasLayer" parent="."]
visible = false

[node name="ColorRect" type="ColorRect" parent="PP"]
material = SubResource("ShaderMaterial_ib0ci")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
